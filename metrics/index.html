<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Flash Growth Metrics" />
    <!-- Add two link elements for favicon -->
    <link rel="shortcut icon" type="image/png" href="../assets/img/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../assets/img/favicon-16x16.png" sizes="16x16" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="../css/main.css" />
    <style>
        /* Dashboard specific styles */
        :root {
            --primary-color: #FFC107;
            --accent-color: #F57C00;
            --tab-active: #FFC107;
            --card-bg-light: #FFFFFF;
            --card-bg-dark: #222222;
            --text-color-light: #333333;
            --text-color-dark: #EEEEEE;
            --growth-positive: #4CAF50;
            --growth-negative: #F44336;
            --chart-grid-light: rgba(0, 0, 0, 0.1);
            --chart-grid-dark: rgba(255, 255, 255, 0.1);
        }

        body.light {
            --bg-body: #F5F5F5;
            --text-color: var(--text-color-light);
            --card-bg: var(--card-bg-light);
            --chart-grid: var(--chart-grid-light);
        }

        body.dark {
            --bg-body: #121212;
            --text-color: var(--text-color-dark);
            --card-bg: var(--card-bg-dark);
            --chart-grid: var(--chart-grid-dark);
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .dashboard-header h1 {
            font-weight: 700;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(128, 128, 128, 0.3);
            margin-bottom: 30px;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            font-weight: 500;
            position: relative;
        }

        .tab.active {
            color: var(--tab-active);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--tab-active);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .cards-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .dashboard-card {
            flex: 1;
            min-width: 300px;
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--card-bg);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            padding: 16px;
            border-bottom: 1px solid rgba(128, 128, 128, 0.2);
        }

        .card-title {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }

        .card-body {
            padding: 20px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .chart-container {
            height: 250px;
            position: relative;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        .metric-box {
            padding: 20px;
            border-radius: 6px;
            text-align: center;
            background-color: rgba(255, 193, 7, 0.1);
        }

        .metric-label {
            font-size: 14px;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .metric-single {
            padding: 20px;
            border-radius: 6px;
            text-align: center;
            background-color: rgba(245, 124, 0, 0.1);
        }

        .growth-indicator {
            text-align: center;
            margin-top: 20px;
            font-weight: 500;
        }

        .growth-positive {
            color: var(--growth-positive);
        }

        .growth-negative {
            color: var(--growth-negative);
        }

        /* Make sure the dashboard fits within the Flash site design */
        .page {
            padding: 40px 0;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .cards-row {
                flex-direction: column;
            }

            .dashboard-card {
                width: 100%;
            }

            .tabs {
                overflow-x: auto;
                white-space: nowrap;
            }
        }
    </style>
    <!-- Script for dark mode -->
    <script>
        // Set the theme based on localStorage
        if (localStorage.getItem("theme")) {
            let t = localStorage.getItem("theme");
            const r = document.querySelector(':root');
            t === "light" ? r.style.setProperty("--bg-body", "#fff") : r.style.setProperty("--bg-body", "#000");
        }
    </script>
    <title>Flash Growth Metrics</title>
</head>

<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <a href="../#pg-download" class="no-style">
                    <img src="../assets/img/logo-black.png" alt="Flash" class="light" />
                    <img src="../assets/img/logo-white.png" alt="Flash" class="dark" />
                </a>
            </div>
            <!-- Navigation -->
            <nav>
                <svg id="open-nav" class="nav-icon mobile-only" aria-label="close menu" width="41" height="15"
                    viewBox="0 0 41 15" xmlns="http://www.w3.org/2000/svg">
                    <line x1="2" y1="2" x2="39" y2="2" stroke="#161313" stroke-width="4" stroke-linecap="round" />
                    <line x1="15" y1="13" x2="39" y2="13" stroke="#161313" stroke-width="4" stroke-linecap="round" />
                </svg>
                <ul class="main-nav" id="main-nav" data-mob-state="closed">
                    <li class="mobile-only">
                        <svg id="close-nav" class="nav-icon" aria-label="close menu" width="26" height="26"
                            viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">
                            <path d="M23.2129 2L1.99969 23.2132" stroke="black" stroke-width="4"
                                stroke-linecap="round" />
                            <path d="M2.21289 2L23.4261 23.2132" stroke="black" stroke-width="4"
                                stroke-linecap="round" />
                        </svg>
                    </li>
                    <li class="darkmode-switch mobile-only">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            aria-hidden="true">
                            <use href="#lightbulb" class="lightbulb"></use>
                        </svg>
                    </li>
                    <li><a href="#" class="nav-link active">Metrics</a></li>
                </ul>
            </nav>
            <!-- End of Navigation -->
            <div id="bitcoin-price" class="btc-widget">
                <h3>Bitcoin Price:</h3>
                <p>1 BTC = $ <span id="btc-value"></span> USD</p>
            </div>
            <div class="darkmode-switch desktop-only">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
                    <use href="#lightbulb" class="lightbulb"></use>
                </svg>
                <p class="desktop-only">Dark Mode <span id="darkmode-text">On</span></p>
            </div>
        </div>
    </header>

    <main>
        <section class="page dashboard-page">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h1>Flash Growth Metrics</h1>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="users">User Metrics</div>
                    <div class="tab" data-tab="transactions">Transaction Metrics</div>
                    <div class="tab" data-tab="products">Product Metrics</div>
                    <div class="tab" data-tab="market">Market Metrics</div>
                </div>

                <!-- User Metrics Tab -->
                <div id="users" class="tab-content active">
                    <div class="cards-row">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">Monthly Active Users (MAU)</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="mauChart"></canvas>
                                </div>
                                <div class="growth-indicator">
                                    Growth: <span class="growth-positive">+15.14% MoM</span>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">User Growth Breakdown</h3>
                            </div>
                            <div class="card-body">
                                <div class="metric-grid">
                                    <div class="metric-box">
                                        <div class="metric-label">Total App Downloads</div>
                                        <div class="metric-value">357</div>
                                    </div>
                                    <div class="metric-box">
                                        <div class="metric-label">Onboarded Merchants</div>
                                        <div class="metric-value">19</div>
                                    </div>
                                </div>
                                <div class="metric-grid">
                                    <div class="metric-box">
                                        <div class="metric-label">Daily Website Visitors</div>
                                        <div class="metric-value">500+</div>
                                    </div>
                                    <div class="metric-box">
                                        <div class="metric-label">Resolved Support Tickets</div>
                                        <div class="metric-value">137</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transaction Metrics Tab -->
                <div id="transactions" class="tab-content">
                    <div class="cards-row">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">Transaction Volume (SATS)</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="volumeChart"></canvas>
                                </div>
                                <div class="growth-indicator">
                                    Average Growth: <span class="growth-positive">+107% MoM</span>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">Average Transaction Value (SATS)</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="avgValueChart"></canvas>
                                </div>
                                <div class="growth-indicator">
                                    Average Growth: <span class="growth-positive">+176.10% MoM</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="cards-row">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">Fee Revenue (SATS)</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="feeChart"></canvas>
                                </div>
                                <div class="growth-indicator">
                                    Median Growth: <span class="growth-positive">+92.56% MoM</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Product Metrics Tab -->
                <div id="products" class="tab-content">
                    <div class="cards-row">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">POS Devices Deployed</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="posChart"></canvas>
                                </div>
                                <div class="growth-indicator">
                                    Growth: <span class="growth-positive">+72.0% MoM</span>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">Rewards Cards Issued</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="cardsChart"></canvas>
                                </div>
                                <div class="growth-indicator">
                                    Growth: <span class="growth-positive">+47% MoM</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Market Metrics Tab -->
                <div id="market" class="tab-content">
                    <div class="cards-row">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">Market Share in Jamaica</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="marketShareChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">Geographic Merchant Expansion</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="geoExpansionChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="cards-row">
                        <!-- <div class="dashboard-card">
                            <div class="card-header">
                                <h3 class="card-title">Market Penetration by Region (%)</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="marketPenetrationChart"></canvas>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-top">
            <div class="container">
                <div class="footer-links">
                    <a href="#pg-download" class="no-style">
                        <img src="../assets/img/logo-black.png" alt="Flash" class="light logo" loading="lazy" />
                        <img src="../assets/img/logo-white.png" alt="Flash" class="dark logo" loading="lazy" />
                    </a>
                    <a href="https://play.google.com/store/apps/details?id=com.lnflash" target="_blank"
                        class="no-style">
                        <img src="../assets/img/google-play-badge.png" alt="Get it on Google Play" class="badge"
                            loading="lazy" />
                    </a>
                    <a href="https://apps.apple.com/jm/app/flash-send-spend-and-save/id6451129095" target="_blank"
                        class="no-style">
                        <img src="../assets/img/ios-badge.png" alt="Download on the App Store" class="badge ios"
                            loading="lazy" />
                    </a>
                </div>
                <div class="legal">
                    <div>
                        <a href="../legal/terms.html">Terms & Conditions</a>
                        <a href="../legal/privacy.html">Privacy Policy</a>
                    </div>
                    <p class="powered">Powered by Bitcoin.</p>
                </div>
            </div>
            <div class="footer-mid">
                <div class="container">
                    <p class="copyright">2021 Flash<span>&trade;</span> All rights reserved.

                    </p>
                    <p class="copyright"><span>&copy;</span> 2023 Island Bitcoin C.A. de S.V. </p>
                </div>
            </div>
            <div class="footer-btm">
                <div class="container">
                    <p>Island Bitcoin C.A. de S.V. entity is regulated by BCR and by the Superintendent of the Financial
                        System of
                        El Salvador. For unresolved queries or complaints, please contact atencionalusuario@ssf.gob.sv
                    </p>
                </div>
            </div>
    </footer>

    <!-- SVG Icons - DO NOT DELETE -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" style="display: none">
        <symbol>
            <g id="plus">
                <rect class="vert" x="8" y="0" width="4" height="20" rx="2" ry="2" />
                <rect class="hori" x="8" y="0" width="4" height="20" rx="2" ry="2"
                    transform="translate(0 20) rotate(-90)" />
            </g>
        </symbol>
        <symbol>
            <rect id="minus" x="8" y="0" width="4" height="20" rx="2" ry="2" transform="translate(0 20) rotate(-90)" />
        </symbol>
    </svg>
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display: none">
        <symbol>
            <g id="lightbulb">
                <path class="stroke" d="M8.25 21.75H15.75" stroke="white" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
                <path class="stroke fill"
                    d="M7.37824 15.6563C6.48665 14.9598 5.76449 14.0703 5.266 13.0546C4.76751 12.039 4.50566 10.9236 4.50012 9.79219C4.47762 5.72719 7.75512 2.34375 11.8192 2.25C13.3942 2.21185 14.9412 2.67066 16.2408 3.56132C17.5403 4.45198 18.5264 5.72927 19.0591 7.21196C19.5918 8.69464 19.644 10.3074 19.2084 11.8215C18.7728 13.3355 17.8715 14.674 16.6323 15.6469C16.359 15.8588 16.1375 16.1302 15.9846 16.4404C15.8318 16.7507 15.7516 17.0917 15.7501 17.4375V18C15.7501 18.1989 15.6711 18.3897 15.5304 18.5303C15.3898 18.671 15.199 18.75 15.0001 18.75H9.00011C8.8012 18.75 8.61044 18.671 8.46978 18.5303C8.32913 18.3897 8.25011 18.1989 8.25011 18V17.4375C8.24976 17.0939 8.17104 16.7548 8.01996 16.4462C7.86888 16.1375 7.64941 15.8673 7.37824 15.6563Z"
                    fill="black" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path class="stroke" d="M12.75 5.25C14.625 5.56594 16.1822 7.125 16.5 9" stroke="white"
                    stroke-linecap="round" stroke-linejoin="round" />
            </g>
        </symbol>
    </svg>

    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>

    <!-- GSAP & Plugins CDN -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Set theme class on body
            const theme = localStorage.getItem('theme') || 'light';
            document.body.classList.add(theme);

            // Tab switching functionality
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Add active class to current tab and content
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Common chart configuration
            function getChartOptions(type) {
                const isDark = document.body.classList.contains('dark');
                const textColor = isDark ? '#EEEEEE' : '#333333';
                const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';

                const commonOptions = {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: textColor
                            }
                        },
                        tooltip: {
                            backgroundColor: isDark ? '#222' : '#fff',
                            titleColor: textColor,
                            bodyColor: textColor,
                            borderColor: gridColor,
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: gridColor
                            },
                            ticks: {
                                color: textColor
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: gridColor
                            },
                            ticks: {
                                color: textColor
                            }
                        }
                    }
                };

                if (type === 'horizontalBar') {
                    return {
                        ...commonOptions,
                        indexAxis: 'y'
                    };
                } else if (type === 'pie') {
                    return {
                        ...commonOptions,
                        scales: {} // No scales for pie charts
                    };
                }

                return commonOptions;
            }

            // Sample data
            const mauData = {
                labels: ['Sep 2024', 'Oct 2024', 'Nov 2024', 'Dec 2024', 'Jan 2025', 'Feb 2025'],
                datasets: [{
                    label: 'Monthly Active Users',
                    data: [120, 220, 231, 271, 321, 352],
                    borderColor: '#FFC109',
                    backgroundColor: 'rgba(255, 193, 7, 0.21)',
                    tension: 0.3,
                    fill: true
                }]
            };

            const transactionData = {
                labels: ['Sep 2024', 'Oct 2024', 'Nov 2024', 'Dec 2024', 'Jan 2025', 'Feb 2025'],
                datasets: [{
                    label: 'Volume (Satoshis)',
                    data: [1681636, 738614, 3865093, 11615655, 26219739, 20708873],
                    backgroundColor: 'rgba(255, 193, 7, 0.7)'
                }]
            };

            const avgValueData = {
                labels: ['Sep 2024', 'Oct 2024', 'Nov 2024', 'Dec 2024', 'Jan 2025', 'Feb 2025'],
                datasets: [{
                    label: 'Average Value (Satoshis)',
                    data: [6527, 5240, 45938, 99050, 79222, 75796],
                    borderColor: '#F57C00',
                    backgroundColor: 'rgba(245, 124, 0, 0.21)',
                    tension: 0.3,
                    fill: true
                }]
            };

            const feeData = {
                labels: ['Nov 2024', 'Dec 2024', 'Jan 2025', 'Feb 2025'],
                datasets: [{
                    label: 'Fee Revenue (Satoshis)',
                    data: [-3284, 57972, 109306, -3946],
                    borderColor: '#F57C00',
                    backgroundColor: 'rgba(245, 124, 0, 0.2)',
                    tension: 0.3,
                    fill: true
                }]
            };

            const posData = {
                labels: ['Sep 2024', 'Oct 2024', 'Nov 2024', 'Dec 2024', 'Jan 2025', 'Feb 2025'],
                datasets: [{
                    label: 'POS Devices',
                    data: [1, 2, 2, 5, 7, 12],
                    backgroundColor: 'rgba(255, 193, 7, 0.7)'
                }]
            };

            const cardsData = {
                labels: ['Sep 2024', 'Oct 2024', 'Nov 2024', 'Dec 2024', 'Jan 2025', 'Feb 2025'],
                datasets: [{
                    label: 'Flash Cards',
                    data: [36, 57, 89, 122, 201, 276],
                    borderColor: '#F57C00',
                    backgroundColor: 'rgba(245, 124, 0, 0.2)',
                    tension: 0.3,
                    fill: true
                }]
            };

            const marketShareData = {
                labels: ['Flash', 'Others', 'No Wallet'],
                datasets: [{
                    label: 'Market Share %',
                    data: [1, 4, 95],
                    backgroundColor: [
                        'rgba(0, 193, 7, 0.8)',
                        'rgba(245, 124, 0, 0.8)',
                        'rgba(255, 193, 7, 0.6)',
                        'rgba(245, 124, 0, 0.6)',
                        'rgba(200, 200, 200, 0.8)'
                    ]
                }]
            };

            const geoData = {
                labels: ['Portland', 'St. Ann', 'St. Elizabeth', 'Kingston'],
                datasets: [{
                    label: '# of Merchants',
                    data: [4, 10, 3, 2],
                    backgroundColor: 'rgba(255, 193, 7, 0.7)'
                }]
            };

            const penetrationData = {
                labels: ['Portland', 'St. Ann', 'St. Elizabeth', 'Kingston', 'Other'],
                datasets: [{
                    label: 'Penetration %',
                    data: [14, 11, 9, 4, 0],
                    backgroundColor: 'rgba(245, 124, 0, 0.7)'
                }]
            };

            // Create charts
            const mauChart = new Chart(
                document.getElementById('mauChart'),
                {
                    type: 'line',
                    data: mauData,
                    options: getChartOptions('line')
                }
            );

            const volumeChart = new Chart(
                document.getElementById('volumeChart'),
                {
                    type: 'bar',
                    data: transactionData,
                    options: getChartOptions('bar')
                }
            );

            const avgValueChart = new Chart(
                document.getElementById('avgValueChart'),
                {
                    type: 'line',
                    data: avgValueData,
                    options: getChartOptions('line')
                }
            );

            const feeChart = new Chart(
                document.getElementById('feeChart'),
                {
                    type: 'line',
                    data: feeData,
                    options: getChartOptions('line')
                }
            );

            const posChart = new Chart(
                document.getElementById('posChart'),
                {
                    type: 'bar',
                    data: posData,
                    options: getChartOptions('bar')
                }
            );

            const cardsChart = new Chart(
                document.getElementById('cardsChart'),
                {
                    type: 'line',
                    data: cardsData,
                    options: getChartOptions('line')
                }
            );

            const marketShareChart = new Chart(
                document.getElementById('marketShareChart'),
                {
                    type: 'pie',
                    data: marketShareData,
                    options: getChartOptions('pie')
                }
            );

            const geoExpansionChart = new Chart(
                document.getElementById('geoExpansionChart'),
                {
                    type: 'bar',
                    data: geoData,
                    options: getChartOptions('horizontalBar')
                }
            );

            const marketPenetrationChart = new Chart(
                document.getElementById('marketPenetrationChart'),
                {
                    type: 'bar',
                    data: penetrationData,
                    options: getChartOptions('horizontalBar')
                }
            );

            // Handle dark mode toggle functionality
            const darkmodeSwitch = document.querySelectorAll('.darkmode-switch');
            darkmodeSwitch.forEach(function (el) {
                el.addEventListener('click', function () {
                    document.body.classList.toggle('dark');
                    document.body.classList.toggle('light');

                    const isDark = document.body.classList.contains('dark');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');

                    document.getElementById('darkmode-text').textContent = isDark ? 'On' : 'Off';

                    // Update chart themes
                    const charts = [
                        mauChart, volumeChart, avgValueChart, feeChart,
                        posChart, cardsChart, marketShareChart,
                        geoExpansionChart, marketPenetrationChart
                    ];

                    charts.forEach(chart => {
                        if (chart.config.type === 'pie') {
                            chart.options = getChartOptions('pie');
                        } else if (chart.options.indexAxis === 'y') {
                            chart.options = getChartOptions('horizontalBar');
                        } else if (chart.config.type === 'line') {
                            chart.options = getChartOptions('line');
                        } else {
                            chart.options = getChartOptions('bar');
                        }
                        chart.update();
                    });
                });
            });
        });
    </script>

    <!-- Flash website JavaScript -->
    <script src="../js/main.js"></script>
    <script src="../js/btcTracker.js"></script>
</body>

</html>